name = "cf-image-worker"
main = "src/index.ts"
compatibility_date = "2025-12-01"

# Account ID from your R2 endpoint
account_id = "95cf2d563e935370edd0213aa03cc92d"

[vars]
# Account ID for public URL construction
ACCOUNT_ID = "95cf2d563e935370edd0213aa03cc92d"
# Comma-separated list of allowed source hostnames. Leave empty to allow all.
ALLOWED_HOSTS = ""
# Defaults used when query params are missing
DEFAULT_QUALITY = "80"
DEFAULT_FORMAT = "webp"
# Enable persistent caching in R2 (set to "1" to enable)
USE_R2_CACHE = "1"
# Hard caps to prevent extreme transforms
MAX_WIDTH = "2048"
MAX_HEIGHT = "2048"

[[r2_buckets]]
binding = "IMG_CACHE"
bucket_name = "my-images"
